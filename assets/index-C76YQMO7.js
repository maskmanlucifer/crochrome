import{r as w,d as le,R as Q}from"./react-vendor-DwiHS9g7.js";import{I as P,_,C as z,U as q,S as V,B as b,R as ne,a as $}from"./antd-vendor-BvwB82ew.js";(function(){const d=document.createElement("link").relList;if(d&&d.supports&&d.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))f(r);new MutationObserver(r=>{for(const u of r)if(u.type==="childList")for(const j of u.addedNodes)j.tagName==="LINK"&&j.rel==="modulepreload"&&f(j)}).observe(document,{childList:!0,subtree:!0});function m(r){const u={};return r.integrity&&(u.integrity=r.integrity),r.referrerPolicy&&(u.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?u.credentials="include":r.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function f(r){if(r.ep)return;r.ep=!0;const u=m(r);fetch(r.href,u)}})();var Y={exports:{}},k={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oe=w,ce=Symbol.for("react.element"),de=Symbol.for("react.fragment"),he=Object.prototype.hasOwnProperty,me=oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,pe={key:!0,ref:!0,__self:!0,__source:!0};function K(p,d,m){var f,r={},u=null,j=null;m!==void 0&&(u=""+m),d.key!==void 0&&(u=""+d.key),d.ref!==void 0&&(j=d.ref);for(f in d)he.call(d,f)&&!pe.hasOwnProperty(f)&&(r[f]=d[f]);if(p&&p.defaultProps)for(f in d=p.defaultProps,d)r[f]===void 0&&(r[f]=d[f]);return{$$typeof:ce,type:p,key:u,ref:j,props:r,_owner:me.current}}k.Fragment=de;k.jsx=K;k.jsxs=K;Y.exports=k;var s=Y.exports,U={},G=le;U.createRoot=G.createRoot,U.hydrateRoot=G.hydrateRoot;var ue={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M869 487.8L491.2 159.9c-2.9-2.5-6.6-3.9-10.5-3.9h-88.5c-7.4 0-10.8 9.2-5.2 14l350.2 304H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h585.1L386.9 854c-5.6 4.9-2.2 14 5.2 14h91.5c1.9 0 3.8-.7 5.2-2L869 536.2a32.07 32.07 0 000-48.4z"}}]},name:"arrow-right",theme:"outlined"},ge=function(d,m){return w.createElement(P,_({},d,{ref:m,icon:ue}))},fe=w.forwardRef(ge),we={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"check-circle",theme:"outlined"},je=function(d,m){return w.createElement(P,_({},d,{ref:m,icon:we}))},xe=w.forwardRef(je),ve={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M518.3 459a8 8 0 00-12.6 0l-112 141.7a7.98 7.98 0 006.3 12.9h73.9V856c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V613.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 459z"}},{tag:"path",attrs:{d:"M811.4 366.7C765.6 245.9 648.9 160 512.2 160S258.8 245.8 213 366.6C127.3 389.1 64 467.2 64 560c0 110.5 89.5 200 199.9 200H304c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8h-40.1c-33.7 0-65.4-13.4-89-37.7-23.5-24.2-36-56.8-34.9-90.6.9-26.4 9.9-51.2 26.2-72.1 16.7-21.3 40.1-36.8 66.1-43.7l37.9-9.9 13.9-36.6c8.6-22.8 20.6-44.1 35.7-63.4a245.6 245.6 0 0152.4-49.9c41.1-28.9 89.5-44.2 140-44.2s98.9 15.3 140 44.2c19.9 14 37.5 30.8 52.4 49.9 15.1 19.3 27.1 40.7 35.7 63.4l13.8 36.5 37.8 10C846.1 454.5 884 503.8 884 560c0 33.1-12.9 64.3-36.3 87.7a123.07 123.07 0 01-87.6 36.3H720c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h40.1C870.5 760 960 670.5 960 560c0-92.7-63.1-170.7-148.6-193.3z"}}]},name:"cloud-upload",theme:"outlined"},ye=function(d,m){return w.createElement(P,_({},d,{ref:m,icon:ve}))},J=w.forwardRef(ye);const L={screenshots:{label:"Screenshots",sizes:[{label:"1280x800",value:"1280x800",width:1280,height:800},{label:"640x400",value:"640x400",width:640,height:400}],aspect:1280/800},"small-promo":{label:"Small Promo Tile",sizes:[{label:"440x280",value:"440x280",width:440,height:280}],aspect:440/280},"marquee-promo":{label:"Marquee Promo Tile",sizes:[{label:"1400x560",value:"1400x560",width:1400,height:560}],aspect:1400/560}};function be(){var F,H;const[p,d]=w.useState(null),[m,f]=w.useState(null),[r,u]=w.useState([]),[j,C]=w.useState(0),[I,N]=w.useState(!1),[x,S]=w.useState({}),[E,T]=w.useState(!1),O=w.useRef({}),g=r[j],c=m?(F=L[p])==null?void 0:F.sizes.find(e=>e.value===m):null,A=async e=>{const t=Array.isArray(e)?e:[e],a=["image/jpeg","image/png","image/jpg"],i=t.filter(n=>{var h;return a.includes((h=n.type)==null?void 0:h.toLowerCase())||/\.(jpg|jpeg|png)$/i.test(n.name)});if(i.length===0)return;const l=i.map(n=>({id:Date.now()+Math.random(),file:n,src:null,processed:null,cropData:null,originalWidth:null,originalHeight:null})),o=await Promise.all(l.map(async n=>new Promise(h=>{const y=new FileReader;y.onload=v=>{const R=new window.Image;R.onload=()=>{h({...n,src:v.target.result,originalWidth:R.naturalWidth||R.width,originalHeight:R.naturalHeight||R.height})},R.onerror=()=>{h({...n,src:v.target.result})},R.src=v.target.result},y.readAsDataURL(n.file)})));u(n=>[...n,...o]),C(n=>n+o.length),I&&N(!1)},D=e=>{const{file:t}=e;if(t){const a=t.originFileObj||t;a&&A([a])}},B=e=>{e.preventDefault(),e.stopPropagation();const t=["image/jpeg","image/png","image/jpg"],a=Array.from(e.dataTransfer.files).filter(i=>t.includes(i.type.toLowerCase())||/\.(jpg|jpeg|png)$/i.test(i.name));a.length>0&&A(a)},X=e=>{x[e]&&URL.revokeObjectURL(x[e]),S(t=>{const a={...t};delete a[e];const i={};return Object.keys(a).forEach(l=>{const o=parseInt(l);o>e?i[o-1]=a[l]:o<e&&(i[o]=a[l])}),i}),u(t=>{const a=t.filter((i,l)=>l!==e);return j>=a.length&&a.length>0?C(a.length-1):a.length===0&&(C(0),N(!1)),a}),O.current[g==null?void 0:g.id]&&delete O.current[g==null?void 0:g.id]},Z=async e=>{const t=r[e];if(!t||!c||!t.src)return;const a=new window.Image;a.src=t.src,await new Promise((o,n)=>{a.onload=o,a.onerror=n});const i=document.createElement("canvas");i.width=c.width,i.height=c.height;const l=i.getContext("2d");l&&(l.imageSmoothingQuality="high",l.drawImage(a,0,0,c.width,c.height),i.toBlob(o=>{const n=URL.createObjectURL(o);S(h=>({...h,[e]:n}))},"image/png"))},ee=async()=>{if(!(!c||r.length===0||E)){T(!0);try{for(let e=0;e<r.length;e++)await Z(e),await new Promise(t=>setTimeout(t,100));N(!0)}finally{T(!1)}}},M=async e=>{const t=r[e];if(!(!t||!c||!t.src))return new Promise(async a=>{let i=null;try{if(x[e]){const h=document.createElement("a");h.href=x[e],h.download=`${p}-${m}-${e+1}.png`,document.body.appendChild(h),h.click(),document.body.removeChild(h),setTimeout(()=>a(),200);return}const l=new window.Image;l.src=t.src,await new Promise((h,y)=>{l.onload=h,l.onerror=y});const o=document.createElement("canvas");o.width=c.width,o.height=c.height;const n=o.getContext("2d");if(!n){a();return}n.imageSmoothingQuality="high",n.drawImage(l,0,0,c.width,c.height),o.toBlob(h=>{if(!h){a();return}const y=URL.createObjectURL(h);i=y;const v=document.createElement("a");v.href=y,v.download=`${p}-${m}-${e+1}.png`,document.body.appendChild(v),v.click(),document.body.removeChild(v),setTimeout(()=>{URL.revokeObjectURL(y),a()},200)},"image/png")}catch(l){console.error("Error downloading image:",l),i&&URL.revokeObjectURL(i),a()}})},se=async()=>{if(!(!c||r.length===0))for(let e=0;e<r.length;e++)await M(e),await new Promise(t=>setTimeout(t,300))},te=async e=>{const t=r[e];if(!t||!c)return;const a=t.processed||new window.Image;t.processed||(a.src=t.src,await new Promise((o,n)=>{a.onload=o,a.onerror=n}));const i=document.createElement("canvas");i.width=c.width,i.height=c.height;const l=i.getContext("2d");l&&(l.drawImage(a,0,0,c.width,c.height),i.toBlob(o=>{const n=URL.createObjectURL(o),h=document.createElement("a");h.href=n,h.download=`${p}-${m}-${e+1}.png`,h.click(),URL.revokeObjectURL(n)},"image/png"))},ae=e=>{d(e);const t=L[e];t.sizes.length>0?f(t.sizes[0].value):f(null),r.length>0&&(Object.values(x).forEach(a=>{a&&URL.revokeObjectURL(a)}),S({}),N(!1))},re=e=>{f(e),r.length>0&&(Object.values(x).forEach(t=>{t&&URL.revokeObjectURL(t)}),S({}),N(!1))},ie=(e,t)=>{},W=w.useCallback((e,t)=>{if(!t||!e)return;const a=t.getContext("2d");if(!a)return;const i=e.processed||new window.Image;if(e.processed){t.width=i.width,t.height=i.height;const o=Math.min(1,800/i.width);t.style.width=`${i.width*o}px`,t.style.height=`${i.height*o}px`,a.drawImage(i,0,0)}else{const l=new window.Image;l.onload=()=>{t.width=l.width,t.height=l.height;const n=Math.min(1,800/l.width);t.style.width=`${l.width*n}px`,t.style.height=`${l.height*n}px`,a.drawImage(l,0,0)},l.src=e.src}},[]);return Q.useEffect(()=>{if(g){const e=`canvas-${g.id}`,t=O.current[e];if(t){const a=setTimeout(()=>{W(g,t)},100);return()=>clearTimeout(a)}}},[g,W]),s.jsxs("div",{className:"app",children:[s.jsxs("div",{className:"container",children:[s.jsx("h1",{children:"ðŸ–¼ï¸ CroChrome"}),s.jsx("p",{className:"subtitle",children:"Resize images for Chrome Web Store assets"}),s.jsxs(z,{className:"asset-types-card",children:[s.jsx("div",{className:"asset-pills-container",children:Object.entries(L).map(([e,t])=>s.jsx("button",{className:`asset-pill ${p===e?"active":""}`,onClick:()=>ae(e),children:s.jsx("span",{className:"pill-text",children:t.label})},e))}),p&&((H=L[p])==null?void 0:H.sizes.length)>0&&s.jsxs("div",{className:"sizes-box",children:[s.jsx("div",{className:"sizes-label",children:"Dimensions:"}),s.jsx("div",{className:"sizes-list",children:L[p].sizes.map(e=>s.jsx("button",{className:`size-pill ${m===e.value?"active":""}`,onClick:()=>re(e.value),children:e.label},e.value))})]})]}),r.length===0?s.jsx(z,{className:"upload-card",children:s.jsx("div",{className:"upload-area",children:s.jsx(q,{accept:"image/jpeg,image/png,.jpg,.jpeg,.png",showUploadList:!1,customRequest:D,multiple:!0,className:"upload-wrapper",onDrop:B,children:s.jsxs("div",{className:"upload-box",children:[s.jsx(J,{className:"upload-icon"}),s.jsx("div",{className:"upload-text",children:"Click or drag images to upload"}),s.jsx("div",{className:"upload-hint",children:"Supports JPEG and PNG formats"})]})})})}):s.jsx(z,{className:"upload-card",children:s.jsx("div",{className:"upload-area",children:s.jsxs(V,{children:[s.jsx(q,{accept:"image/jpeg,image/png,.jpg,.jpeg,.png",showUploadList:!1,customRequest:D,multiple:!0,className:"upload-wrapper",onDrop:B,children:s.jsx(b,{icon:s.jsx(J,{}),type:"default",size:"small",children:"Upload New"})}),Object.keys(x).length<r.length&&s.jsx(b,{onClick:ee,type:"primary",disabled:!p||!m||E,loading:E,size:"small",className:"resize-all-btn",children:E?"Resizing...":"Resize All Images"})]})})}),r.length>0&&!I&&s.jsxs(z,{className:"images-list-card",children:[s.jsx("div",{className:"images-list-header",children:s.jsxs("div",{className:"images-count",children:[r.length," image",r.length>1?"s":""]})}),s.jsx("div",{className:"images-list",children:r.map((e,t)=>s.jsxs("div",{className:`image-thumbnail ${j===t?"active":""}`,onClick:()=>C(t),children:[e.src?s.jsx("div",{className:"thumbnail-image-wrapper",children:s.jsx("img",{src:e.src,alt:`Thumbnail ${t+1}`,style:{width:80,height:80,objectFit:"cover",borderRadius:"4px",display:"block"},onError:a=>{console.error("Error loading thumbnail:",e.src),a.target.style.display="none"}})}):s.jsx("div",{className:"thumbnail-image-wrapper",style:{width:80,height:80,display:"flex",alignItems:"center",justifyContent:"center",background:"#262626",borderRadius:"4px"},children:s.jsx("span",{style:{color:"#8c8c8c",fontSize:"12px"},children:"Loading..."})}),s.jsx(b,{type:"text",icon:s.jsx(ne,{}),className:"remove-btn",onClick:a=>{a.stopPropagation(),X(t)},size:"small"})]},e.id))})]}),I&&r.length>0&&s.jsxs(z,{className:"resize-view-card",children:[s.jsxs("div",{className:"resize-view-header",children:[s.jsx("h3",{children:"Preview & Download"}),s.jsxs(V,{children:[s.jsx(b,{onClick:()=>N(!1),size:"small",children:"Back"}),s.jsxs(b,{icon:s.jsx($,{}),onClick:se,size:"small",type:"primary",children:["Download All (",r.length,")"]})]})]}),s.jsx("div",{className:"resize-comparison-grid",children:r.map((e,t)=>s.jsx("div",{className:"resize-comparison-item",children:s.jsxs("div",{className:"comparison-row",children:[s.jsxs("div",{className:"comparison-image-container",children:[s.jsx("div",{className:"comparison-label",children:"Original"}),e.src?s.jsx("img",{src:e.src,alt:`Original ${t+1}`,className:"comparison-image",onError:a=>{console.error("Error loading original image:",e.src),a.target.style.display="none"}}):s.jsx("div",{className:"resize-placeholder",children:"Loading..."})]}),s.jsx(fe,{className:"arrow-icon"}),s.jsxs("div",{className:"comparison-image-container",children:[s.jsxs("div",{className:"comparison-label",children:["Resized (",c==null?void 0:c.width,"x",c==null?void 0:c.height,")"]}),x[t]?s.jsx("img",{src:x[t],alt:`Resized ${t+1}`,className:"comparison-image",onError:a=>{console.error("Error loading resized image:",x[t]),a.target.style.display="none"}}):s.jsx("div",{className:"resize-placeholder",children:"Pending resize"}),s.jsx(b,{icon:s.jsx($,{}),onClick:()=>M(t),size:"small",type:"primary",disabled:!x[t],className:"download-corner-btn download-resized-btn",title:"Download Resized",children:s.jsx("span",{className:"download-btn-text",children:"Download"})})]})]})},e.id))})]}),(g==null?void 0:g.processed)&&s.jsx(z,{className:"canvas-card",children:s.jsxs("div",{className:"canvas-wrapper",children:[s.jsx("canvas",{ref:e=>{g&&(O.current[`canvas-${g.id}`]=e)},onClick:e=>ie(e,O.current[`canvas-${g==null?void 0:g.id}`]),style:{maxWidth:"100%",border:"1px solid #434343",cursor:"default"}}),s.jsxs("div",{className:"canvas-actions",children:[s.jsx(b,{icon:s.jsx(xe,{}),onClick:()=>{j<r.length-1&&C(j+1)},size:"small",type:"primary",className:"canvas-action-btn check-btn",title:"Confirm"}),s.jsx(b,{icon:s.jsx($,{}),onClick:()=>te(j),size:"small",type:"primary",disabled:!m,className:"canvas-action-btn download-btn",title:"Download"})]})]})})]}),s.jsx("footer",{className:"app-footer",children:s.jsxs("p",{children:["Built by ",s.jsx("a",{href:"https://maskmanlucifer.github.io/lucifer/",target:"_blank",rel:"noopener noreferrer",children:"maskmanlucifer"})]})})]})}U.createRoot(document.getElementById("root")).render(s.jsx(Q.StrictMode,{children:s.jsx(be,{})}));
